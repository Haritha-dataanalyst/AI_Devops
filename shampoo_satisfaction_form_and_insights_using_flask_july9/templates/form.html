<!DOCTYPE html>
<html>
<head>
    <title>Shampoo Usage Survey</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f8fb;
            margin: 0;
            padding: 40px 10px;
            display: flex;
            justify-content: center;
        }
        .container {
            max-width: 600px;
            width: 100%;
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0px 0px 10px #ccc;
        }
        h2 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 25px;
        }
        form label {
            display: block;
            margin-top: 15px;
            font-weight: bold;
        }
        input[type="text"],
        input[type="email"],
        select {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border-radius: 4px;
            border: 1px solid #ccc;
            box-sizing: border-box;
        }
        input[type="radio"] {
            margin-right: 5px;
        }
        .radio-label {
            margin-right: 20px;
        }
        ul {
            padding-left: 20px;
            margin-top: 5px;
        }
        #shampoo-section {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #ddd;
            margin-top: 20px;
        }
        .btn {
            background-color: #3498db;
            color: white;
            padding: 12px 18px;
            margin-top: 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
        }
        .btn:hover {
            background-color: #2980b9;
        }
        .error-message {
            color: red;
            text-align: center;
            margin-bottom: 10px;
        }
        a.btn {
            text-align: center;
            display: block;
            text-decoration: none;
            line-height: 2.5;
        }
    </style>

    <script>
        function toggleShampooSection() {
            const used = document.querySelector('input[name="used"]:checked');
            const section = document.getElementById('shampoo-section');

            if (used && used.value === 'yes') {
                section.style.display = 'block';

                // Make shampoo section fields required
                document.querySelector('[name="shampoo"]').setAttribute('required', true);
                document.querySelector('[name="usage_duration"]').setAttribute('required', true);
                document.querySelector('[name="satisfaction"]').setAttribute('required', true);
                document.querySelector('[name="reason"]').setAttribute('required', true);
                document.querySelectorAll('[name="recommend"]').forEach(r => r.setAttribute('required', true));

            } else {
                section.style.display = 'none';

                // Remove required attributes
                document.querySelector('[name="shampoo"]').removeAttribute('required');
                document.querySelector('[name="usage_duration"]').removeAttribute('required');
                document.querySelector('[name="satisfaction"]').removeAttribute('required');
                document.querySelector('[name="reason"]').removeAttribute('required');
                document.querySelectorAll('[name="recommend"]').forEach(r => r.removeAttribute('required'));
            }
        }

        function toggleOtherInput() {
            let shampooSelect = document.getElementById('shampoo');
            const otherInput = document.getElementById('other-input');
            const shampooName = shampooSelect.value === 'others'
                ? document.getElementById('other_shampoo').value
                : shampooSelect.value;

            document.getElementById('shampoo-name-1').innerText = shampooName;
            document.getElementById('shampoo-name-2').innerText = shampooName;
            document.getElementById('shampoo-name-3').innerText = shampooName;

            otherInput.style.display = (shampooSelect.value === 'others') ? 'block' : 'none';
        }

        function updateOtherShampooName() {
            const shampooName = document.getElementById('other_shampoo').value;
            document.getElementById('shampoo-name-1').innerText = shampooName;
            document.getElementById('shampoo-name-2').innerText = shampooName;
            document.getElementById('shampoo-name-3').innerText = shampooName;
        }
    </script>
</head>
<body>
    <div class="container">
        <h2>Shampoo Usage Survey</h2>

        {% with messages = get_flashed_messages() %}
            {% if messages %}
                <p class="error-message">{{ messages[0] }}</p>
            {% endif %}
        {% endwith %}

        <form method="post">
            <label>Name:</label>
            <input type="text" name="name" required>

            <label>Age Group:</label>
            <select name="age_group" required>
                <option>Under 18</option>
                <option>18–25</option>
                <option>26–35</option>
                <option>36–50</option>
                <option>51–65</option>
                <option>66 and above</option>
            </select>

            <label>Gender:</label>
            <select name="gender" required>
                <option>Female</option>
                <option>Male</option>
                <option>Transgender</option>
            </select>

            <label>City:</label>
            <input type="text" name="city" required>

            <label>State:</label>
            <input type="text" name="state" required>

            <label>Mobile Number:</label>
            <input type="text" name="mobile" required>

            <label>Email ID:</label>
            <input type="email" name="email" required>

            <!--<label>Popular Shampoo Brands:</label>
            <ul>
                <li>Head & Shoulders</li>
                <li>Himalaya</li>
                <li>Pantene</li>
                <li>Dove</li>
                <li>Sunsilk</li>
            </ul>-->

            <label>Are you using shampoos?</label><br>
            <span class="radio-label"><input type="radio" name="used" value="yes" onchange="toggleShampooSection()" required> Yes</span>
            <span class="radio-label"><input type="radio" name="used" value="no" onchange="toggleShampooSection()"> No</span>

            <div id="shampoo-section" style="display:none;">
                <label>Select Shampoo:</label>
                <select name="shampoo" id="shampoo" onchange="toggleOtherInput()">
                    <option value="Head & Shoulders">Head & Shoulders</option>
                    <option value="Himalaya">Himalaya</option>
                    <option value="Pantene">Pantene</option>
                    <option value="Dove">Dove</option>
                    <option value="Sunsilk">Sunsilk</option>
                    <option value="others">Others</option>
                </select>

                <div id="other-input" style="display:none;">
                    <label>Specify Other Shampoo:</label>
                    <input type="text" name="other_shampoo" id="other_shampoo" oninput="updateOtherShampooName()">
                </div>

                <label>How long have you been using <b id="shampoo-name-1">this shampoo</b>?</label>
                <select name="usage_duration">
                    <option>Less than 6 months</option>
                    <option>1 year</option>
                    <option>2 years</option>
                    <option>3 years</option>
                    <option>More than 3 years</option>
                </select>

                <label>How satisfied are you with <b id="shampoo-name-2">this shampoo</b>?</label>
                <select name="satisfaction">
                    <option>5 – Very Satisfied</option>
                    <option>4 – Satisfied</option>
                    <option>3 – Neutral</option>
                    <option>2 – Dissatisfied</option>
                    <option>1 – Very Dissatisfied</option>
                </select>

                <label>What is the reason for using <b id="shampoo-name-3">this shampoo</b>?</label>
                <input type="text" name="reason">

                <label>Would you recommend it to others?</label><br>
                <input type="radio" name="recommend" value="Yes"> Yes
                <input type="radio" name="recommend" value="No"> No
            </div>

            <input class="btn" type="submit" value="Submit">
        </form>

        <!--<a href="/download" class="btn">Download Survey CSV</a>--->
    </div>
</body>
</html>
